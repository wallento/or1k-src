<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Newlib OR1K Support: OR1K interrupt control</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Newlib OR1K Support
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">OR1K interrupt control</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__or1k__interrupts.html#gab7ae874855fae020a8f84e61e91ad1c0">or1k_interrupt_handler_add</a> (int line, void(*handler)(void *))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__or1k__interrupts.html#gace2e505048c2d8a77521e4bf5bc03967">or1k_interrupt_enable</a> (int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__or1k__interrupts.html#ga0f0f3a574dde52175eabace4aaaec34a">or1k_interrupt_disable</a> (int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__or1k__interrupts.html#ga344fd4bd73d40748de810eda21f0f47c">or1k_interrupts_enable</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__or1k__interrupts.html#ga678519bbf7a7fe2efe99f1b4c7a8da18">or1k_interrupts_restore</a> (uint32_t status)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Interrupt control function prototypes </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga0f0f3a574dde52175eabace4aaaec34a"></a><!-- doxytag: member="or1k&#45;support.h::or1k_interrupt_disable" ref="ga0f0f3a574dde52175eabace4aaaec34a" args="(int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__or1k__interrupts.html#ga0f0f3a574dde52175eabace4aaaec34a">or1k_interrupt_disable</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable interrupts from a given line</p>
<p>Mask given interrupt line. It can be unmasked using <a class="el" href="group__or1k__interrupts.html#gace2e505048c2d8a77521e4bf5bc03967">or1k_interrupt_enable()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>Interrupt line to disable </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gace2e505048c2d8a77521e4bf5bc03967"></a><!-- doxytag: member="or1k&#45;support.h::or1k_interrupt_enable" ref="gace2e505048c2d8a77521e4bf5bc03967" args="(int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__or1k__interrupts.html#gace2e505048c2d8a77521e4bf5bc03967">or1k_interrupt_enable</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enable interrupts from a given line</p>
<p>Unmask the given interrupt line. It is also important to enable interrupts in general, e.g., using <a class="el" href="group__or1k__interrupts.html#ga344fd4bd73d40748de810eda21f0f47c">or1k_interrupts_enable()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>Interrupt line to enable </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab7ae874855fae020a8f84e61e91ad1c0"></a><!-- doxytag: member="or1k&#45;support.h::or1k_interrupt_handler_add" ref="gab7ae874855fae020a8f84e61e91ad1c0" args="(int line, void(*handler)(void *))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__or1k__interrupts.html#gab7ae874855fae020a8f84e61e91ad1c0">or1k_interrupt_handler_add</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add interrupt handler for interrupt line</p>
<p>Registers a callback function for a certain interrupt line.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>Interrupt line/id to register a handler for </td></tr>
    <tr><td class="paramname">handler</td><td>Handler to register </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6596faf65911ecbcc9881937971946f3"></a><!-- doxytag: member="or1k&#45;support.h::or1k_interrupts_disable" ref="ga6596faf65911ecbcc9881937971946f3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable interrupts</p>
<p>This disables the interrupt exception. This is sufficient to disable all interrupts. It does not change the mask register (which is modified using <a class="el" href="group__or1k__interrupts.html#gace2e505048c2d8a77521e4bf5bc03967">or1k_interrupt_enable()</a> and <a class="el" href="group__or1k__interrupts.html#ga0f0f3a574dde52175eabace4aaaec34a">or1k_interrupt_disable()</a>).</p>
<p>The interrupt exception can be enabled using <a class="el" href="group__or1k__interrupts.html#ga344fd4bd73d40748de810eda21f0f47c">or1k_interrupts_enable()</a>.</p>
<p>Finally, the status of the interrupt exception enable flag is returned by this function. That allows to call this function even if interrupts are already disabled. To restore the value of the interrupt exception enable flag, use the <a class="el" href="group__or1k__interrupts.html#ga678519bbf7a7fe2efe99f1b4c7a8da18">or1k_interrupts_restore()</a> function. That way you avoid to accidentally enable interrupts. Example:</p>
<div class="fragment"><pre class="fragment">   <span class="keywordtype">void</span> f() {
     uint32_t interrupt_status = <a class="code" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable</a>();
     <span class="comment">// do something</span>
     <a class="code" href="group__or1k__interrupts.html#ga678519bbf7a7fe2efe99f1b4c7a8da18">or1k_interrupts_restore</a>(status);
   }
</pre></div><p>This code will preserve the original status of the interrupt enable flag.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Interrupt exception enable flag before call </dd></dl>

</div>
</div>
<a class="anchor" id="ga344fd4bd73d40748de810eda21f0f47c"></a><!-- doxytag: member="or1k&#45;support.h::or1k_interrupts_enable" ref="ga344fd4bd73d40748de810eda21f0f47c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__or1k__interrupts.html#ga344fd4bd73d40748de810eda21f0f47c">or1k_interrupts_enable</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enable interrupt exception</p>
<p>Enable the interrupt exception. Beside the interrupt exception, it is also necessary to enable the individual interrupt lines using <a class="el" href="group__or1k__interrupts.html#gace2e505048c2d8a77521e4bf5bc03967">or1k_interrupt_enable()</a>.</p>
<p>You should avoid using this function together with <a class="el" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable()</a> to guard atomic blocks as it unconditionally enables the interrupt exception (see documentation of <a class="el" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable()</a>). </p>

</div>
</div>
<a class="anchor" id="ga678519bbf7a7fe2efe99f1b4c7a8da18"></a><!-- doxytag: member="or1k&#45;support.h::or1k_interrupts_restore" ref="ga678519bbf7a7fe2efe99f1b4c7a8da18" args="(uint32_t status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__or1k__interrupts.html#ga678519bbf7a7fe2efe99f1b4c7a8da18">or1k_interrupts_restore</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Restore interrupt exception enable flag</p>
<p>This function restores the given status to the processor. or1k_interrupts_restore(0) is identical to <a class="el" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable()</a> and or1k_interrupts_restore(SPR_SR_IEE) is identical to <a class="el" href="group__or1k__interrupts.html#ga344fd4bd73d40748de810eda21f0f47c">or1k_interrupts_enable()</a>.</p>
<p>It is for example used to guard an atomic block and restore the original status of the interrupt exception enable flag as returned by <a class="el" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable()</a>. See the documentation of <a class="el" href="group__or1k__interrupts.html#ga6596faf65911ecbcc9881937971946f3">or1k_interrupts_disable()</a> for a usage example.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>Status of the flag to restore </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 22 2014 10:09:31 for Newlib OR1K Support by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
